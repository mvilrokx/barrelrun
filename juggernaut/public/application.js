if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}this.io={version:"0.6",setPath:function(b){if(window.console&&console.error){console.error("io.setPath will be removed. Please set the variable WEB_SOCKET_SWF_LOCATION pointing to WebSocketMain.swf")}this.path=/\/$/.test(b)?b:b+"/";WEB_SOCKET_SWF_LOCATION=b+"lib/vendor/web-socket-js/WebSocketMain.swf"}};if("jQuery" in this){jQuery.io=this.io}if(typeof window!="undefined"){WEB_SOCKET_SWF_LOCATION=(document.location.protocol=="https:"?"https:":"http:")+"//cdn.socket.io/"+this.io.version+"/WebSocketMain.swf"}(function(){var b=false;io.util={ios:false,load:function(a){if(document.readyState=="complete"||b){return a()}if("attachEvent" in window){window.attachEvent("onload",a)}else{window.addEventListener("load",a,false)}},inherit:function(e,a){for(var f in a.prototype){e.prototype[f]=a.prototype[f]}},indexOf:function(a,h,g){for(var j=a.length,i=(g<0)?Math.max(0,j+g):g||0;i<j;i++){if(a[i]===h){return i}}return -1},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"}};io.util.ios=/iphone|ipad/i.test(navigator.userAgent);io.util.android=/android/i.test(navigator.userAgent);io.util.opera=/opera/i.test(navigator.userAgent);io.util.load(function(){b=true})})();(function(){var d="~m~",c=function(a){if(Object.prototype.toString.call(a)=="[object Object]"){if(!("JSON" in window)){if("console" in window&&console.error){console.error("Trying to encode as JSON, but JSON.stringify is missing.")}return'{ "$error": "Invalid message" }'}return"~j~"+JSON.stringify(a)}else{return String(a)}};Transport=io.Transport=function(a,f){this.base=a;this.options={timeout:15000};for(var b in f){if(this.options.hasOwnProperty(b)){this.options[b]=f[b]}}};Transport.prototype.send=function(){throw new Error("Missing send() implementation")};Transport.prototype.connect=function(){throw new Error("Missing connect() implementation")};Transport.prototype.disconnect=function(){throw new Error("Missing disconnect() implementation")};Transport.prototype._encode=function(a){var i="",b,a=io.util.isArray(a)?a:[a];for(var h=0,j=a.length;h<j;h++){b=a[h]===null||a[h]===undefined?"":c(a[h]);i+=d+b.length+d+b}return i};Transport.prototype._decode=function(b){var i=[],j,a;do{if(b.substr(0,3)!==d){return i}b=b.substr(3);j="",a="";for(var k=0,l=b.length;k<l;k++){a=Number(b.substr(k,1));if(b.substr(k,1)==a){j+=a}else{b=b.substr(j.length+d.length);j=Number(j);break}}i.push(b.substr(0,j));b=b.substr(j)}while(b!=="");return i};Transport.prototype._onData=function(a){this._setTimeout();var b=this._decode(a);if(b&&b.length){for(var g=0,h=b.length;g<h;g++){this._onMessage(b[g])}}};Transport.prototype._setTimeout=function(){var a=this;if(this._timeout){clearTimeout(this._timeout)}this._timeout=setTimeout(function(){a._onTimeout()},this.options.timeout)};Transport.prototype._onTimeout=function(){this._onDisconnect()};Transport.prototype._onMessage=function(a){if(!this.sessionid){this.sessionid=a;this._onConnect()}else{if(a.substr(0,3)=="~h~"){this._onHeartbeat(a.substr(3))}else{if(a.substr(0,3)=="~j~"){this.base._onMessage(JSON.parse(a.substr(3)))}else{this.base._onMessage(a)}}}},Transport.prototype._onHeartbeat=function(a){this.send("~h~"+a)};Transport.prototype._onConnect=function(){this.connected=true;this.connecting=false;this.base._onConnect();this._setTimeout()};Transport.prototype._onDisconnect=function(){this.connecting=false;this.connected=false;this.sessionid=null;this.base._onDisconnect()};Transport.prototype._prepareUrl=function(){return(this.base.options.secure?"https":"http")+"://"+this.base.host+":"+this.base.options.port+"/"+this.base.options.resource+"/"+this.type+(this.sessionid?("/"+this.sessionid):"/")}})();(function(){var g=new Function,f=(function(){if(!("XMLHttpRequest" in window)){return false}var a=new XMLHttpRequest();return a.withCredentials!=undefined})(),h=function(b){if("XDomainRequest" in window&&b){return new XDomainRequest()}if("XMLHttpRequest" in window&&(!b||f)){return new XMLHttpRequest()}if(!b){try{var c=new ActiveXObject("MSXML2.XMLHTTP");return c}catch(a){}try{var d=new ActiveXObject("Microsoft.XMLHTTP");return d}catch(a){}}return false},e=io.Transport.XHR=function(){io.Transport.apply(this,arguments);this._sendBuffer=[]};io.util.inherit(e,io.Transport);e.prototype.connect=function(){this._get();return this};e.prototype._checkSend=function(){if(!this._posting&&this._sendBuffer.length){var a=this._encode(this._sendBuffer);this._sendBuffer=[];this._send(a)}};e.prototype.send=function(a){if(io.util.isArray(a)){this._sendBuffer.push.apply(this._sendBuffer,a)}else{this._sendBuffer.push(a)}this._checkSend();return this};e.prototype._send=function(a){var b=this;this._posting=true;this._sendXhr=this._request("send","POST");this._sendXhr.onreadystatechange=function(){var d;if(b._sendXhr.readyState==4){b._sendXhr.onreadystatechange=g;try{d=b._sendXhr.status}catch(c){}b._posting=false;if(d==200){b._checkSend()}else{b._onDisconnect()}}};this._sendXhr.send("data="+encodeURIComponent(a))},e.prototype.disconnect=function(){this._onDisconnect();return this};e.prototype._onDisconnect=function(){if(this._xhr){this._xhr.onreadystatechange=this._xhr.onload=g;this._xhr.abort();this._xhr=null}if(this._sendXhr){this._sendXhr.onreadystatechange=this._sendXhr.onload=g;this._sendXhr.abort();this._sendXhr=null}this._sendBuffer=[];io.Transport.prototype._onDisconnect.call(this)};e.prototype._request=function(c,a,d){var b=h(this.base._isXDomain());if(d){b.multipart=true}b.open(a||"GET",this._prepareUrl()+(c?"/"+c:""));if(a=="POST"&&"setRequestHeader" in b){b.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8")}return b};e.check=function(b){try{if(h(b)){return true}}catch(a){}return false};e.xdomainCheck=function(){return e.check(true)};e.request=h})();(function(){var b=io.Transport.websocket=function(){io.Transport.apply(this,arguments)};io.util.inherit(b,io.Transport);b.prototype.type="websocket";b.prototype.connect=function(){var a=this;this.socket=new WebSocket(this._prepareUrl());this.socket.onmessage=function(d){a._onData(d.data)};this.socket.onclose=function(d){a._onClose()};return this};b.prototype.send=function(a){this.socket.send(this._encode(a));return this};b.prototype.disconnect=function(){this.socket.close();return this};b.prototype._onClose=function(){this._onDisconnect();return this};b.prototype._prepareUrl=function(){return(this.base.options.secure?"wss":"ws")+"://"+this.base.host+":"+this.base.options.port+"/"+this.base.options.resource+"/"+this.type+(this.sessionid?("/"+this.sessionid):"")};b.check=function(){return"WebSocket" in window&&WebSocket.prototype&&(WebSocket.prototype.send&&!!WebSocket.prototype.send.toString().match(/native/i))&&typeof WebSocket!=="undefined"};b.xdomainCheck=function(){return true}})();(function(){var b=io.Transport.flashsocket=function(){io.Transport.websocket.apply(this,arguments)};io.util.inherit(b,io.Transport.websocket);b.prototype.type="flashsocket";b.prototype.connect=function(){var a=this,d=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.connect.apply(a,d)});return this};b.prototype.send=function(){var a=this,d=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.send.apply(a,d)});return this};b.prototype._onClose=function(){if(!this.base.connected){this.base.options.transports.splice(io.util.indexOf(this.base.options.transports,"flashsocket"),1);this.base.transport=this.base.getTransport();this.base.connect();return}return io.Transport.websocket.prototype._onClose.call(this)};b.check=function(){if(typeof WebSocket=="undefined"||!("__addTask" in WebSocket)){return false}if(io.util.opera){return false}if("navigator" in window&&"plugins" in navigator&&navigator.plugins["Shockwave Flash"]){return !!navigator.plugins["Shockwave Flash"].description}if("ActiveXObject" in window){try{return !!new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(a){}}return false};b.xdomainCheck=function(){return true}})();(function(){var b=io.Transport.htmlfile=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(b,io.Transport.XHR);b.prototype.type="htmlfile";b.prototype._get=function(){var a=this;this._open();window.attachEvent("onunload",function(){a._destroy()})};b.prototype._open=function(){this._doc=new ActiveXObject("htmlfile");this._doc.open();this._doc.write("<html></html>");this._doc.parentWindow.s=this;this._doc.close();var a=this._doc.createElement("div");this._doc.body.appendChild(a);this._iframe=this._doc.createElement("iframe");a.appendChild(this._iframe);this._iframe.src=this._prepareUrl()+"/"+(+new Date)};b.prototype._=function(f,e){this._onData(f);var a=e.getElementsByTagName("script")[0];a.parentNode.removeChild(a)};b.prototype._destroy=function(){this._iframe.src="about:blank";this._doc=null;CollectGarbage()};b.prototype.disconnect=function(){this._destroy();return io.Transport.XHR.prototype.disconnect.call(this)};b.check=function(){if("ActiveXObject" in window){try{var a=new ActiveXObject("htmlfile");return a&&io.Transport.XHR.check()}catch(d){}}return false};b.xdomainCheck=function(){return false}})();(function(){var b=io.Transport["xhr-multipart"]=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(b,io.Transport.XHR);b.prototype.type="xhr-multipart";b.prototype._get=function(){var a=this;this._xhr=this._request("","GET",true);this._xhr.onreadystatechange=function(){if(a._xhr.readyState==3){a._onData(a._xhr.responseText)}};this._xhr.send()};b.check=function(){return"XMLHttpRequest" in window&&"prototype" in XMLHttpRequest&&"multipart" in XMLHttpRequest.prototype};b.xdomainCheck=function(){return true}})();(function(){var d=new Function(),c=io.Transport["xhr-polling"]=function(){io.Transport.XHR.apply(this,arguments)};io.util.inherit(c,io.Transport.XHR);c.prototype.type="xhr-polling";c.prototype.connect=function(){if(io.util.ios||io.util.android){var a=this;io.util.load(function(){setTimeout(function(){io.Transport.XHR.prototype.connect.call(a)},10)})}else{io.Transport.XHR.prototype.connect.call(this)}};c.prototype._get=function(){var a=this;this._xhr=this._request(+new Date,"GET");if("onload" in this._xhr){this._xhr.onload=function(){a._onData(this.responseText);a._get()}}else{this._xhr.onreadystatechange=function(){var e;if(a._xhr.readyState==4){a._xhr.onreadystatechange=d;try{e=a._xhr.status}catch(b){}if(e==200){a._onData(a._xhr.responseText);a._get()}else{a._onDisconnect()}}}}this._xhr.send()};c.check=function(){return io.Transport.XHR.check()};c.xdomainCheck=function(){return io.Transport.XHR.xdomainCheck()}})();io.JSONP=[];JSONPPolling=io.Transport["jsonp-polling"]=function(){io.Transport.XHR.apply(this,arguments);this._insertAt=document.getElementsByTagName("script")[0];this._index=io.JSONP.length;io.JSONP.push(this)};io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]);JSONPPolling.prototype.type="jsonp-polling";JSONPPolling.prototype._send=function(l){var e=this;if(!("_form" in this)){var q=document.createElement("FORM"),p=document.createElement("TEXTAREA"),r=this._iframeId="socket_io_iframe_"+this._index,m;q.style.position="absolute";q.style.top="-1000px";q.style.left="-1000px";q.target=r;q.method="POST";q.action=this._prepareUrl()+"/"+(+new Date)+"/"+this._index;p.name="data";q.appendChild(p);this._insertAt.parentNode.insertBefore(q,this._insertAt);document.body.appendChild(q);this._form=q;this._area=p}function o(){n();e._posting=false;e._checkSend()}function n(){if(e._iframe){e._form.removeChild(e._iframe)}try{m=document.createElement('<iframe name="'+e._iframeId+'">')}catch(a){m=document.createElement("iframe");m.name=e._iframeId}m.id=e._iframeId;e._form.appendChild(m);e._iframe=m}n();this._posting=true;this._area.value=l;try{this._form.submit()}catch(k){}if(this._iframe.attachEvent){m.onreadystatechange=function(){if(e._iframe.readyState=="complete"){o()}}}else{this._iframe.onload=o}};JSONPPolling.prototype._get=function(){var c=this,d=document.createElement("SCRIPT");if(this._script){this._script.parentNode.removeChild(this._script);this._script=null}d.async=true;d.src=this._prepareUrl()+"/"+(+new Date)+"/"+this._index;d.onerror=function(){c._onDisconnect()};this._insertAt.parentNode.insertBefore(d,this._insertAt);this._script=d};JSONPPolling.prototype._=function(){this._onData.apply(this,arguments);this._get();return this};JSONPPolling.check=function(){return true};JSONPPolling.xdomainCheck=function(){return true};(function(){var b=io.Socket=function(e,a){this.host=e||document.domain;this.options={secure:false,document:document,port:document.location.port||80,resource:"socket.io",transports:["websocket","flashsocket","htmlfile","xhr-multipart","xhr-polling","jsonp-polling"],transportOptions:{"xhr-polling":{timeout:25000},"jsonp-polling":{timeout:25000}},connectTimeout:5000,tryTransportsOnConnectTimeout:true,rememberTransport:true};for(var f in a){if(this.options.hasOwnProperty(f)){this.options[f]=a[f]}}this.connected=false;this.connecting=false;this._events={};this.transport=this.getTransport();if(!this.transport&&"console" in window){console.error("No transport available")}};b.prototype.getTransport=function(h){var a=h||this.options.transports,j;if(this.options.rememberTransport&&!h){j=this.options.document.cookie.match("(?:^|;)\\s*socketio=([^;]*)");if(j){a=[decodeURIComponent(j[1])]}}for(var i=0,g;g=a[i];i++){if(io.Transport[g]&&io.Transport[g].check()&&(!this._isXDomain()||io.Transport[g].xdomainCheck())){return new io.Transport[g](this,this.options.transportOptions[g]||{})}}return null};b.prototype.connect=function(){if(this.transport&&!this.connected){if(this.connecting){this.disconnect()}this.connecting=true;this.transport.connect();if(this.options.connectTimeout){var a=this;setTimeout(function(){if(!a.connected){a.disconnect();if(a.options.tryTransportsOnConnectTimeout){var j=[],i=a.options.transports;for(var h=0,g;g=i[h];h++){if(g!=a.transport.type){j.push(g)}}if(j.length){a.transport=a.getTransport(j);a.connect()}}}},this.options.connectTimeout)}}return this};b.prototype.send=function(a){if(!this.transport||!this.transport.connected){return this._queue(a)}this.transport.send(a);return this};b.prototype.disconnect=function(){this.transport.disconnect();return this};b.prototype.on=function(a,d){if(!(a in this._events)){this._events[a]=[]}this._events[a].push(d);return this};b.prototype.fire=function(h,a){if(h in this._events){for(var g=0,f=this._events[h].length;g<f;g++){this._events[h][g].apply(this,a===undefined?[]:a)}}return this};b.prototype.removeEvent=function(g,f){if(g in this._events){for(var h=0,a=this._events[g].length;h<a;h++){if(this._events[g][h]==f){this._events[g].splice(h,1)}}}return this};b.prototype._queue=function(a){if(!("_queueStack" in this)){this._queueStack=[]}this._queueStack.push(a);return this};b.prototype._doQueue=function(){if(!("_queueStack" in this)||!this._queueStack.length){return this}this.transport.send(this._queueStack);this._queueStack=[];return this};b.prototype._isXDomain=function(){return this.host!==document.domain};b.prototype._onConnect=function(){this.connected=true;this.connecting=false;this._doQueue();if(this.options.rememberTransport){this.options.document.cookie="socketio="+encodeURIComponent(this.transport.type)}this.fire("connect")};b.prototype._onMessage=function(a){this.fire("message",[a])};b.prototype._onDisconnect=function(){var a=this.connected;this.connected=false;this.connecting=false;this._queueStack=[];if(a){this.fire("disconnect")}};b.prototype.addListener=b.prototype.addEvent=b.prototype.addEventListener=b.prototype.on})();var swfobject=function(){var l="undefined",T="object",A="Shockwave Flash",e="ShockwaveFlash.ShockwaveFlash",S="application/x-shockwave-flash",z="SWFObjectExprInst",f="onreadystatechange",w=window,L=document,V=navigator,B=false,a=[J],Q=[],v=[],q=[],N,y,m,j,r=false,C=false,P,o,O=true,u=function(){var ah=typeof L.getElementById!=l&&typeof L.getElementsByTagName!=l&&typeof L.createElement!=l,ad=V.userAgent.toLowerCase(),af=V.platform.toLowerCase(),aa=af?/win/.test(af):/win/.test(ad),Y=af?/mac/.test(af):/mac/.test(ad),ab=/webkit/.test(ad)?parseFloat(ad.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ae=!+"\v1",ac=[0,0,0],X=null;if(typeof V.plugins!=l&&typeof V.plugins[A]==T){X=V.plugins[A].description;if(X&&!(typeof V.mimeTypes!=l&&V.mimeTypes[S]&&!V.mimeTypes[S].enabledPlugin)){B=true;ae=false;X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ac[0]=parseInt(X.replace(/^(.*)\..*$/,"$1"),10);ac[1]=parseInt(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);ac[2]=/[a-zA-Z]/.test(X)?parseInt(X.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof w.ActiveXObject!=l){try{var Z=new ActiveXObject(e);if(Z){X=Z.GetVariable("$version");if(X){ae=true;X=X.split(" ")[1].split(",");ac=[parseInt(X[0],10),parseInt(X[1],10),parseInt(X[2],10)]}}}catch(ag){}}}return{w3:ah,pv:ac,wk:ab,ie:ae,win:aa,mac:Y}}(),M=function(){if(!u.w3){return}if((typeof L.readyState!=l&&L.readyState=="complete")||(typeof L.readyState==l&&(L.getElementsByTagName("body")[0]||L.body))){H()}if(!r){if(typeof L.addEventListener!=l){L.addEventListener("DOMContentLoaded",H,false)}if(u.ie&&u.win){L.attachEvent(f,function(){if(L.readyState=="complete"){L.detachEvent(f,arguments.callee);H()}});if(w==top){(function(){if(r){return}try{L.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}H()})()}}if(u.wk){(function(){if(r){return}if(!/loaded|complete/.test(L.readyState)){setTimeout(arguments.callee,0);return}H()})()}U(H)}}();function H(){if(r){return}try{var X=L.getElementsByTagName("body")[0].appendChild(k("span"));X.parentNode.removeChild(X)}catch(Y){return}r=true;var Z=a.length;for(var aa=0;aa<Z;aa++){a[aa]()}}function s(X){if(r){X()}else{a[a.length]=X}}function U(Y){if(typeof w.addEventListener!=l){w.addEventListener("load",Y,false)}else{if(typeof L.addEventListener!=l){L.addEventListener("load",Y,false)}else{if(typeof w.attachEvent!=l){K(w,"onload",Y)}else{if(typeof w.onload=="function"){var X=w.onload;w.onload=function(){X();Y()}}else{w.onload=Y}}}}}function J(){if(B){c()}else{p()}}function c(){var Z=L.getElementsByTagName("body")[0];var X=k(T);X.setAttribute("type",S);var Y=Z.appendChild(X);if(Y){var aa=0;(function(){if(typeof Y.GetVariable!=l){var ab=Y.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");u.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(aa<10){aa++;setTimeout(arguments.callee,10);return}}Z.removeChild(X);Y=null;p()})()}else{p()}}function p(){var ac=Q.length;if(ac>0){for(var ab=0;ab<ac;ab++){var ag=Q[ab].id;var X=Q[ab].callbackFn;var ai={success:false,id:ag};if(u.pv[0]>0){var aa=E(ag);if(aa){if(n(Q[ab].swfVersion)&&!(u.wk&&u.wk<312)){d(ag,true);if(X){ai.success=true;ai.ref=h(ag);X(ai)}}else{if(Q[ab].expressInstall&&i()){var ae={};ae.data=Q[ab].expressInstall;ae.width=aa.getAttribute("width")||"0";ae.height=aa.getAttribute("height")||"0";if(aa.getAttribute("class")){ae.styleclass=aa.getAttribute("class")}if(aa.getAttribute("align")){ae.align=aa.getAttribute("align")}var ad={};var af=aa.getElementsByTagName("param");var Y=af.length;for(var Z=0;Z<Y;Z++){if(af[Z].getAttribute("name").toLowerCase()!="movie"){ad[af[Z].getAttribute("name")]=af[Z].getAttribute("value")}}x(ae,ad,ag,X)}else{R(aa);if(X){X(ai)}}}}}else{d(ag,true);if(X){var ah=h(ag);if(ah&&typeof ah.SetVariable!=l){ai.success=true;ai.ref=ah}X(ai)}}}}}function h(X){var Z=null;var aa=E(X);if(aa&&aa.nodeName=="OBJECT"){if(typeof aa.SetVariable!=l){Z=aa}else{var Y=aa.getElementsByTagName(T)[0];if(Y){Z=Y}}}return Z}function i(){return !C&&n("6.0.65")&&(u.win||u.mac)&&!(u.wk&&u.wk<312)}function x(ab,ad,Z,ac){C=true;m=ac||null;j={success:false,id:Z};var Y=E(Z);if(Y){if(Y.nodeName=="OBJECT"){N=I(Y);y=null}else{N=Y;y=Z}ab.id=z;if(typeof ab.width==l||(!/%$/.test(ab.width)&&parseInt(ab.width,10)<310)){ab.width="310"}if(typeof ab.height==l||(!/%$/.test(ab.height)&&parseInt(ab.height,10)<137)){ab.height="137"}L.title=L.title.slice(0,47)+" - Flash Player Installation";var X=u.ie&&u.win?"ActiveX":"PlugIn",ae="MMredirectURL="+w.location.toString().replace(/&/g,"%26")+"&MMplayerType="+X+"&MMdoctitle="+L.title;if(typeof ad.flashvars!=l){ad.flashvars+="&"+ae}else{ad.flashvars=ae}if(u.ie&&u.win&&Y.readyState!=4){var aa=k("div");Z+="SWFObjectNew";aa.setAttribute("id",Z);Y.parentNode.insertBefore(aa,Y);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}W(ab,ad,Z)}}function R(Y){if(u.ie&&u.win&&Y.readyState!=4){var X=k("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(I(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(I(Y),Y)}}function I(X){var ab=k("div");if(u.win&&u.ie){ab.innerHTML=X.innerHTML}else{var aa=X.getElementsByTagName(T)[0];if(aa){var Y=aa.childNodes;if(Y){var Z=Y.length;for(var ac=0;ac<Z;ac++){if(!(Y[ac].nodeType==1&&Y[ac].nodeName=="PARAM")&&!(Y[ac].nodeType==8)){ab.appendChild(Y[ac].cloneNode(true))}}}}}return ab}function W(ae,ac,ag){var af,ai=E(ag);if(u.wk&&u.wk<312){return af}if(ai){if(typeof ae.id==l){ae.id=ag}if(u.ie&&u.win){var ad="";for(var aa in ae){if(ae[aa]!=Object.prototype[aa]){if(aa.toLowerCase()=="data"){ac.movie=ae[aa]}else{if(aa.toLowerCase()=="styleclass"){ad+=' class="'+ae[aa]+'"'}else{if(aa.toLowerCase()!="classid"){ad+=" "+aa+'="'+ae[aa]+'"'}}}}}var ab="";for(var Z in ac){if(ac[Z]!=Object.prototype[Z]){ab+='<param name="'+Z+'" value="'+ac[Z]+'" />'}}ai.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ad+">"+ab+"</object>";v[v.length]=ae.id;af=E(ae.id)}else{var ah=k(T);ah.setAttribute("type",S);for(var Y in ae){if(ae[Y]!=Object.prototype[Y]){if(Y.toLowerCase()=="styleclass"){ah.setAttribute("class",ae[Y])}else{if(Y.toLowerCase()!="classid"){ah.setAttribute(Y,ae[Y])}}}}for(var X in ac){if(ac[X]!=Object.prototype[X]&&X.toLowerCase()!="movie"){G(ah,X,ac[X])}}ai.parentNode.replaceChild(ah,ai);af=ah}}return af}function G(X,Z,aa){var Y=k("param");Y.setAttribute("name",Z);Y.setAttribute("value",aa);X.appendChild(Y)}function g(Y){var X=E(Y);if(X&&X.nodeName=="OBJECT"){if(u.ie&&u.win){X.style.display="none";(function(){if(X.readyState==4){D(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function D(Y){var X=E(Y);if(X){for(var Z in X){if(typeof X[Z]=="function"){X[Z]=null}}X.parentNode.removeChild(X)}}function E(Y){var Z=null;try{Z=L.getElementById(Y)}catch(X){}return Z}function k(X){return L.createElement(X)}function K(Y,Z,X){Y.attachEvent(Z,X);q[q.length]=[Y,Z,X]}function n(Y){var X=u.pv,Z=Y.split(".");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return(X[0]>Z[0]||(X[0]==Z[0]&&X[1]>Z[1])||(X[0]==Z[0]&&X[1]==Z[1]&&X[2]>=Z[2]))?true:false}function b(X,aa,Y,ad){if(u.ie&&u.mac){return}var ab=L.getElementsByTagName("head")[0];if(!ab){return}var Z=(Y&&typeof Y=="string")?Y:"screen";if(ad){P=null;o=null}if(!P||o!=Z){var ac=k("style");ac.setAttribute("type","text/css");ac.setAttribute("media",Z);P=ab.appendChild(ac);if(u.ie&&u.win&&typeof L.styleSheets!=l&&L.styleSheets.length>0){P=L.styleSheets[L.styleSheets.length-1]}o=Z}if(u.ie&&u.win){if(P&&typeof P.addRule==T){P.addRule(X,aa)}}else{if(P&&typeof L.createTextNode!=l){P.appendChild(L.createTextNode(X+" {"+aa+"}"))}}}function d(Y,Z){if(!O){return}var X=Z?"visible":"hidden";if(r&&E(Y)){E(Y).style.visibility=X}else{b("#"+Y,"visibility:"+X)}}function t(X){var Y=/[\\\"<>\.;]/;var Z=Y.exec(X)!=null;return Z&&typeof encodeURIComponent!=l?encodeURIComponent(X):X}var F=function(){if(u.ie&&u.win){window.attachEvent("onunload",function(){var Y=q.length;for(var X=0;X<Y;X++){q[X][0].detachEvent(q[X][1],q[X][2])}var ab=v.length;for(var ac=0;ac<ab;ac++){g(v[ac])}for(var aa in u){u[aa]=null}u=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(Y,Z,ab,X){if(u.w3&&Y&&Z){var aa={};aa.id=Y;aa.swfVersion=Z;aa.expressInstall=ab;aa.callbackFn=X;Q[Q.length]=aa;d(Y,false)}else{if(X){X({success:false,id:Y})}}},getObjectById:function(X){if(u.w3){return h(X)}},embedSWF:function(X,ad,aa,ac,af,ah,ag,Z,ab,Y){var ae={success:false,id:ad};if(u.w3&&!(u.wk&&u.wk<312)&&X&&ad&&aa&&ac&&af){d(ad,false);s(function(){aa+="";ac+="";var ak={};if(ab&&typeof ab===T){for(var am in ab){ak[am]=ab[am]}}ak.data=X;ak.width=aa;ak.height=ac;var an={};if(Z&&typeof Z===T){for(var al in Z){an[al]=Z[al]}}if(ag&&typeof ag===T){for(var aj in ag){if(typeof an.flashvars!=l){an.flashvars+="&"+aj+"="+ag[aj]}else{an.flashvars=aj+"="+ag[aj]}}}if(n(af)){var ai=W(ak,an,ad);if(ak.id==ad){d(ad,true)}ae.success=true;ae.ref=ai}else{if(ah&&i()){ak.data=ah;x(ak,an,ad,Y);return}else{d(ad,true)}}if(Y){Y(ae)}})}else{if(Y){Y(ae)}}},switchOffAutoHideShow:function(){O=false},ua:u,getFlashPlayerVersion:function(){return{major:u.pv[0],minor:u.pv[1],release:u.pv[2]}},hasFlashPlayerVersion:n,createSWF:function(Y,X,Z){if(u.w3){return W(Y,X,Z)}else{return undefined}},showExpressInstall:function(X,Y,Z,aa){if(u.w3&&i()){x(X,Y,Z,aa)}},removeSWF:function(X){if(u.w3){g(X)}},createCSS:function(X,Y,aa,Z){if(u.w3){b(X,Y,aa,Z)}},addDomLoadEvent:s,addLoadEvent:U,getQueryParamValue:function(X){var Y=L.location.search||L.location.hash;if(Y){if(/\?/.test(Y)){Y=Y.split("?")[1]}if(X==null){return t(Y)}var aa=Y.split("&");for(var Z=0;Z<aa.length;Z++){if(aa[Z].substring(0,aa[Z].indexOf("="))==X){return t(aa[Z].substring((aa[Z].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(C){var X=E(z);if(X&&N){X.parentNode.replaceChild(N,X);if(y){d(y,true);if(u.ie&&u.win){N.style.display="block"}}if(m){m(j)}}C=false}}}}();function FABridge(c,d){this.target=c;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=FABridge.nextBridgeID++;this.name=d;this.nextLocalFuncID=0;FABridge.instances[this.name]=this;FABridge.idMap[this.bridgeID]=this;return this}FABridge.TYPE_ASINSTANCE=1;FABridge.TYPE_ASFUNCTION=2;FABridge.TYPE_JSFUNCTION=3;FABridge.TYPE_ANONYMOUS=4;FABridge.initCallbacks={};FABridge.userTypes={};FABridge.addToUserTypes=function(){for(var b=0;b<arguments.length;b++){FABridge.userTypes[arguments[b]]={typeName:arguments[b],enriched:false}}};FABridge.argsToArray=function(d){var e=[];for(var f=0;f<d.length;f++){e[f]=d[f]}return e};function instanceFactory(b){this.fb_instance_id=b;return this}function FABridge__invokeJSFunction(f){var h=f[0];var e=f.concat();e.shift();var g=FABridge.extractBridgeFromID(h);return g.invokeLocalFunction(h,e)}FABridge.addInitializationCallback=function(e,g){var h=FABridge.instances[e];if(h!=undefined){g.call(h);return}var f=FABridge.initCallbacks[e];if(f==null){FABridge.initCallbacks[e]=f=[]}f.push(g)};function FABridge__bridgeInitialized(F){var L=document.getElementsByTagName("object");var G=L.length;var I=[];if(G>0){for(var l=0;l<G;l++){if(typeof L[l].SetVariable!="undefined"){I[I.length]=L[l]}}}var D=document.getElementsByTagName("embed");var K=D.length;var m=[];if(K>0){for(var z=0;z<K;z++){if(typeof D[z].SetVariable!="undefined"){m[m.length]=D[z]}}}var J=I.length;var y=m.length;var E="bridgeName="+F;if((J==1&&!y)||(J==1&&y==1)){FABridge.attachBridge(I[0],F)}else{if(y==1&&!J){FABridge.attachBridge(m[0],F)}else{var k=false;if(J>1){for(var A=0;A<J;A++){var i=I[A].childNodes;for(var B=0;B<i.length;B++){var H=i[B];if(H.nodeType==1&&H.tagName.toLowerCase()=="param"&&H.name.toLowerCase()=="flashvars"&&H.value.indexOf(E)>=0){FABridge.attachBridge(I[A],F);k=true;break}}if(k){break}}}if(!k&&y>1){for(var C=0;C<y;C++){var j=m[C].attributes.getNamedItem("flashVars").nodeValue;if(j.indexOf(E)>=0){FABridge.attachBridge(m[C],F);break}}}}}return true}FABridge.nextBridgeID=0;FABridge.instances={};FABridge.idMap={};FABridge.refCount=0;FABridge.extractBridgeFromID=function(c){var d=(c>>16);return FABridge.idMap[d]};FABridge.attachBridge=function(g,j){var f=new FABridge(g,j);FABridge[j]=f;var h=FABridge.initCallbacks[j];if(h==null){return}for(var i=0;i<h.length;i++){h[i].call(f)}delete FABridge.initCallbacks[j]};FABridge.blockedMethods={toString:true,get:true,set:true,call:true};FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(c){if(typeof(c)!="object"){return false}else{var d=this.target.releaseNamedASObject(c.fb_instance_id);return d}},create:function(b){return this.deserialize(this.target.create(b))},makeID:function(b){return(this.bridgeID<<16)+b},getPropertyFromAS:function(c,d){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.getPropFromAS(c,d);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},setPropertyInAS:function(f,d,e){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.setPropInAS(f,d,this.serialize(e));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASFunction:function(c,d){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;retVal=this.target.invokeASFunction(c,this.serialize(d));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASMethod:function(d,f,e){if(FABridge.refCount>0){throw new Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.")}else{FABridge.refCount++;e=this.serialize(e);retVal=this.target.invokeASMethod(d,f,e);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},invokeLocalFunction:function(g,e){var f;var h=this.localFunctionCache[g];if(h!=undefined){f=this.serialize(h.apply(null,this.deserialize(e)))}return f},getTypeFromName:function(b){return this.remoteTypeCache[b]},createProxy:function(h,e){var g=this.getTypeFromName(e);instanceFactory.prototype=g;var f=new instanceFactory(h);this.remoteInstanceCache[h]=f;return f},getProxy:function(b){return this.remoteInstanceCache[b]},addTypeDataToCache:function(g){newType=new ASProxy(this,g.name);var e=g.accessors;for(var h=0;h<e.length;h++){this.addPropertyToType(newType,e[h])}var f=g.methods;for(var h=0;h<f.length;h++){if(FABridge.blockedMethods[f[h]]==undefined){this.addMethodToType(newType,f[h])}}this.remoteTypeCache[newType.typeName]=newType;return newType},addPropertyToType:function(g,i){var h=i.charAt(0);var c;var j;if(h>="a"&&h<="z"){j="get"+h.toUpperCase()+i.substr(1);c="set"+h.toUpperCase()+i.substr(1)}else{j="get"+i;c="set"+i}g[c]=function(a){this.bridge.setPropertyInAS(this.fb_instance_id,i,a)};g[j]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,i))}},addMethodToType:function(d,c){d[c]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,c,FABridge.argsToArray(arguments)))}},getFunctionProxy:function(d){var c=this;if(this.remoteFunctionCache[d]==null){this.remoteFunctionCache[d]=function(){c.callASFunction(d,FABridge.argsToArray(arguments))}}return this.remoteFunctionCache[d]},getFunctionID:function(b){if(b.__bridge_id__==undefined){b.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[b.__bridge_id__]=b}return b.__bridge_id__},serialize:function(g){var f={};var h=typeof(g);if(h=="number"||h=="string"||h=="boolean"||h==null||h==undefined){f=g}else{if(g instanceof Array){f=[];for(var e=0;e<g.length;e++){f[e]=this.serialize(g[e])}}else{if(h=="function"){f.type=FABridge.TYPE_JSFUNCTION;f.value=this.getFunctionID(g)}else{if(g instanceof ASProxy){f.type=FABridge.TYPE_ASINSTANCE;f.value=g.fb_instance_id}else{f.type=FABridge.TYPE_ANONYMOUS;f.value=g}}}}return f},deserialize:function(h){var g;var j=typeof(h);if(j=="number"||j=="string"||j=="boolean"||h==null||h==undefined){g=this.handleError(h)}else{if(h instanceof Array){g=[];for(var f=0;f<h.length;f++){g[f]=this.deserialize(h[f])}}else{if(j=="object"){for(var f=0;f<h.newTypes.length;f++){this.addTypeDataToCache(h.newTypes[f])}for(var i in h.newRefs){this.createProxy(i,h.newRefs[i])}if(h.type==FABridge.TYPE_PRIMITIVE){g=h.value}else{if(h.type==FABridge.TYPE_ASFUNCTION){g=this.getFunctionProxy(h.value)}else{if(h.type==FABridge.TYPE_ASINSTANCE){g=this.getProxy(h.value)}else{if(h.type==FABridge.TYPE_ANONYMOUS){g=h.value}}}}}}}return g},addRef:function(b){this.target.incRef(b.fb_instance_id)},release:function(b){this.target.releaseRef(b.fb_instance_id)},handleError:function(c){if(typeof(c)=="string"&&c.indexOf("__FLASHERROR")==0){var d=c.split("||");if(FABridge.refCount>0){FABridge.refCount--}throw new Error(d[1]);return c}else{return c}}};ASProxy=function(c,d){this.bridge=c;this.typeName=d;return this};ASProxy.prototype={get:function(b){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,b))},set:function(c,d){this.bridge.setPropertyInAS(this.fb_instance_id,c,d)},call:function(c,d){this.bridge.callASMethod(this.fb_instance_id,c,d)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};(function(){if(window.WebSocket){return}var d=window.console;if(!d){d={log:function(){},error:function(){}}}if(!swfobject.hasFlashPlayerVersion("9.0.0")){d.error("Flash Player is not installed.");return}if(location.protocol=="file:"){d.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...")}WebSocket=function(j,a,k,b,i){var l=this;l.readyState=WebSocket.CONNECTING;l.bufferedAmount=0;setTimeout(function(){WebSocket.__addTask(function(){l.__createFlash(j,a,k,b,i)})},1)};WebSocket.prototype.__createFlash=function(j,a,k,b,i){var l=this;l.__flash=WebSocket.__flash.create(j,a,k||null,b||0,i||null);l.__flash.addEventListener("open",function(f){try{l.readyState=l.__flash.getReadyState();if(l.__timer){clearInterval(l.__timer)}if(window.opera){l.__timer=setInterval(function(){l.__handleMessages()},500)}if(l.onopen){l.onopen()}}catch(e){d.error(e.toString())}});l.__flash.addEventListener("close",function(f){try{l.readyState=l.__flash.getReadyState();if(l.__timer){clearInterval(l.__timer)}if(l.onclose){l.onclose()}}catch(e){d.error(e.toString())}});l.__flash.addEventListener("message",function(){try{l.__handleMessages()}catch(e){d.error(e.toString())}});l.__flash.addEventListener("error",function(f){try{if(l.__timer){clearInterval(l.__timer)}if(l.onerror){l.onerror()}}catch(e){d.error(e.toString())}});l.__flash.addEventListener("stateChange",function(f){try{l.readyState=l.__flash.getReadyState();l.bufferedAmount=f.getBufferedAmount()}catch(e){d.error(e.toString())}})};WebSocket.prototype.send=function(a){if(this.__flash){this.readyState=this.__flash.getReadyState()}if(!this.__flash||this.readyState==WebSocket.CONNECTING){throw"INVALID_STATE_ERR: Web Socket connection has not been established"}var b=this.__flash.send(encodeURIComponent(a));if(b<0){return true}else{this.bufferedAmount=b;return false}};WebSocket.prototype.close=function(){if(!this.__flash){return}this.readyState=this.__flash.getReadyState();if(this.readyState!=WebSocket.OPEN){return}this.__flash.close();this.readyState=WebSocket.CLOSED;if(this.__timer){clearInterval(this.__timer)}if(this.onclose){this.onclose()}};WebSocket.prototype.addEventListener=function(b,a,f){if(!("__events" in this)){this.__events={}}if(!(b in this.__events)){this.__events[b]=[];if("function"==typeof this["on"+b]){this.__events[b].defaultHandler=this["on"+b];this["on"+b]=this.__createEventHandler(this,b)}}this.__events[b].push(a)};WebSocket.prototype.removeEventListener=function(b,a,h){if(!("__events" in this)){this.__events={}}if(!(b in this.__events)){return}for(var g=this.__events.length;g>-1;--g){if(a===this.__events[b][g]){this.__events[b].splice(g,1);break}}};WebSocket.prototype.dispatchEvent=function(a){if(!("__events" in this)){throw"UNSPECIFIED_EVENT_TYPE_ERR"}if(!(a.type in this.__events)){throw"UNSPECIFIED_EVENT_TYPE_ERR"}for(var b=0,f=this.__events[a.type].length;b<f;++b){this.__events[a.type][b](a);if(a.cancelBubble){break}}if(false!==a.returnValue&&"function"==typeof this.__events[a.type].defaultHandler){this.__events[a.type].defaultHandler(a)}};WebSocket.prototype.__handleMessages=function(){var h=this.__flash.readSocketData();for(var e=0;e<h.length;e++){var b=decodeURIComponent(h[e]);try{if(this.onmessage){var a;if(window.MessageEvent){a=document.createEvent("MessageEvent");a.initMessageEvent("message",false,false,b,null,null,window,null)}else{a={data:b}}this.onmessage(a)}}catch(a){d.error(a.toString())}}};WebSocket.prototype.__createEventHandler=function(b,a){return function(h){var i=new c();i.initEvent(a,true,true);i.target=i.currentTarget=b;for(var j in h){i[j]=h[j]}b.dispatchEvent(i,arguments)}};function c(){}c.prototype.cancelable=true;c.prototype.cancelBubble=false;c.prototype.preventDefault=function(){if(this.cancelable){this.returnValue=false}};c.prototype.stopPropagation=function(){this.cancelBubble=true};c.prototype.initEvent=function(f,a,b){this.type=f;this.cancelable=b;this.timeStamp=new Date()};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__tasks=[];WebSocket.__initialize=function(){if(WebSocket.__swfLocation){window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation}if(!window.WEB_SOCKET_SWF_LOCATION){d.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}var b=document.createElement("div");b.id="webSocketContainer";b.style.position="absolute";if(WebSocket.__isFlashLite()){b.style.left="0px";b.style.top="0px"}else{b.style.left="-100px";b.style.top="-100px"}var a=document.createElement("div");a.id="webSocketFlash";b.appendChild(a);document.body.appendChild(b);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","9.0.0",null,{bridgeName:"webSocket"},{hasPriority:true,allowScriptAccess:"always"},null,function(e){if(!e.success){d.error("[WebSocket] swfobject.embedSWF failed")}});FABridge.addInitializationCallback("webSocket",function(){try{WebSocket.__flash=FABridge.webSocket.root();WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var h=0;h<WebSocket.__tasks.length;++h){WebSocket.__tasks[h]()}WebSocket.__tasks=[]}catch(e){d.error("[WebSocket] "+e.toString())}})};WebSocket.__addTask=function(a){if(WebSocket.__flash){a()}else{WebSocket.__tasks.push(a)}};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes){return false}var a=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!a||!a.enabledPlugin||!a.enabledPlugin.filename){return false}return a.enabledPlugin.filename.match(/flashlite/i)?true:false};window.webSocketLog=function(a){d.log(decodeURIComponent(a))};window.webSocketError=function(a){d.error(decodeURIComponent(a))};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION){if(window.addEventListener){window.addEventListener("load",WebSocket.__initialize,false)}else{window.attachEvent("onload",WebSocket.__initialize)}}})();if(typeof window!="undefined"){WEB_SOCKET_SWF_LOCATION="/WebSocketMain.swf"}var Juggernaut=function(b){this.options=b||{};this.host=this.options.host||window.location.hostname;this.port=this.options.port||8080;this.handlers={};this.state="disconnected";this.meta=this.options.meta;this.socket=new io.Socket(this.host,{rememberTransport:false,port:this.port,secure:this.options.secure});this.socket.on("connect",this.proxy(this.onconnect));this.socket.on("message",this.proxy(this.onmessage));this.socket.on("disconnect",this.proxy(this.ondisconnect));this.on("connect",this.proxy(this.writeMeta))};Juggernaut.fn=Juggernaut.prototype;Juggernaut.fn.proxy=function(c){var d=this;return(function(){return c.apply(d,arguments)})};Juggernaut.fn.on=function(d,c){if(!d||!c){return}if(!this.handlers[d]){this.handlers[d]=[]}this.handlers[d].push(c)};Juggernaut.fn.bind=Juggernaut.fn.on;Juggernaut.fn.write=function(b){if(typeof b.toJSON=="function"){b=b.toJSON()}this.socket.send(b)};Juggernaut.fn.connect=function(){if(this.state=="connected"||this.state=="connecting"){return}this.state="connecting";this.socket.connect()};Juggernaut.fn.subscribe=function(d,f){if(!d){throw"Must provide a channel"}this.on(d+":data",f);var e=this.proxy(function(){var a=new Juggernaut.Message;a.type="subscribe";a.channel=d;this.write(a)});this.on("connect",e);if(this.state=="connected"){e()}else{this.connect()}};Juggernaut.fn.unsubscribe=function(c){if(!c){throw"Must provide a channel"}var d=new Juggernaut.Message;d.type="unsubscribe";d.channel=c;this.write(d)};Juggernaut.fn.trigger=function(){var l=[];for(var i=0;i<arguments.length;i++){l.push(arguments[i])}var f=l.shift();var j=this.handlers[f];if(!j){return}for(var k=0,h=j.length;k<h;k++){j[k].apply(this,l)}};Juggernaut.fn.writeMeta=function(){if(!this.meta){return}var b=new Juggernaut.Message;b.type="meta";b.data=this.meta;this.write(b)};Juggernaut.fn.onconnect=function(){this.sessionID=this.socket.transport.sessionid;this.state="connected";this.trigger("connect")};Juggernaut.fn.ondisconnect=function(){this.state="disconnected";this.trigger("disconnect");if(this.options.reconnect!==false){this.reconnect()}};Juggernaut.fn.onmessage=function(c){var d=Juggernaut.Message.fromJSON(c);this.trigger("message",d);this.trigger("data",d.channel,d.data);this.trigger(d.channel+":data",d.data)};Juggernaut.fn.reconnect=function(){if(this.recInterval){return}var b=function(){clearInterval(this.recInterval);this.recInterval=null};this.recInterval=setInterval(this.proxy(function(){if(this.state=="connected"){b()}else{this.trigger("reconnect");this.connect()}}),3000)};Juggernaut.Message=function(c){for(var d in c){this[d]=c[d]}};Juggernaut.Message.fromJSON=function(b){return(new this(JSON.parse(b)))};Juggernaut.Message.prototype.toJSON=function(){var d={};for(var c in this){if(typeof this[c]!="function"){d[c]=this[c]}}return(JSON.stringify(d))};